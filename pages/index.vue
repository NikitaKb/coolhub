<template>
  <div>
     
    <section class="news-section">
      <div class="section-title">–ù–æ–≤–æ—Å—Ç–∏</div>
      <div class="news-slider">
        <div v-for="(slide, index) in newsSlides" 
             :key="index" 
             class="news-slide"
             :class="{ active: currentSlide === index }">
          <div class="news-block">
            <div class="news-content">
              <img :src="slide.image" :alt="slide.title" class="news-image">
              <h3>{{ slide.title }}</h3>
              <p>{{ slide.description }}</p>
            </div>
          </div>
        </div>
        <div class="news-tabs">
          <button v-for="(_, index) in newsSlides" 
                  :key="index"
                  class="tab"
                  :class="{ active: currentSlide === index }"
                  @click="currentSlide = index">
          </button>
        </div>
      </div>
    </section>

    <section class="benefits-section">
      <div class="section-title">–ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —É –Ω–∞—Å?</div>
      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-icon">üéì</div>
          <h3>–†–∞–∑–≤–∏—Ç–∏–µ –∫–æ–ª–ª–µ–¥–∂–∞</h3>
          <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –Ω–∞—à –∫–æ–ª–ª–µ–¥–∂ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">üë•</div>
          <h3>–°–æ–æ–±—â–µ—Å—Ç–≤–æ</h3>
          <p>–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏ –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤ –¥–ª—è –æ–±–º–µ–Ω–∞ –æ–ø—ã—Ç–æ–º –∏ –∑–Ω–∞–Ω–∏—è–º–∏</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">üí°</div>
          <h3>–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏</h3>
          <p>–ü—Ä–æ–¥–≤–∏–≥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∏–¥–µ–∏ –∏ –ø—Ä–æ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å –±—É–¥—É—â–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">üåü</div>
          <h3>–ö–∞—Ä—å–µ—Ä–∞</h3>
          <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
        </div>
      </div>
    </section>

    <!-- –†–∞–∑–¥–µ–ª —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Å–∞–π—Ç–∞ -->
    <section class="features-section">
      <div class="section-title">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞</div>
      <div class="features-list">
        <div class="feature-item">
          <div class="feature-icon">‚ûï</div>
          <div class="feature-content">
            <h3>–°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</h3>
            <p>–õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤—Å–µ –¥–µ—Ç–∞–ª–∏, –¥–∞—Ç—É, –≤—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è.</p>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">‚úÖ</div>
          <div class="feature-content">
            <h3>–£—á–∞—Å—Ç–∏–µ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö</h3>
            <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏.</p>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üë§</div>
          <div class="feature-content">
            <h3>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
            <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏ –ø–æ—Å–µ—â–µ–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.</p>
          </div>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üîç</div>
          <div class="feature-content">
            <h3>–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h3>
            <p>–ù–∞—Ö–æ–¥–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –¥–∞—Ç–µ –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="recommend-section">
      <div class="section-title">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</div>
      
      <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->
      <div class="search-bar">
        <input type="text" v-model="searchQuery" placeholder="–ü–æ–∏—Å–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." class="search-input">
      </div>

      <div class="cards-grid">
        <EventCard
          v-for="event in filteredEvents"
          :key="event.id"
          :title="event.title"
          :description="event.description"
          @view="goToEvent(event.id)"
        >
          <template #footer>
            <div class="event-meta">
              <span>–°–æ–∑–¥–∞—Ç–µ–ª—å: {{ event.creator?.name }}</span>
              <span>–î–∞—Ç–∞: {{ formatDate(event.date) }}</span>
            </div>
          </template>
        </EventCard>
      </div>
      <div class="buttons-row">
        <button class="btn">–î–∞–ª—å—à–µ</button>
        <NuxtLink to="/offer" class="btn">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</NuxtLink>
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted, computed } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()
const currentSlide = ref(0)
const newsSlides = ref([
  {
    title: '–ù–æ–≤—ã–π —Å–∞–π—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∫–æ–ª–ª–µ–¥–∂–∞',
    description: '–ú—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ –Ω–æ–≤—ã–π —Å–∞–π—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ —É—á–∞—Å—Ç–∏—è –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∫–æ–ª–ª–µ–¥–∂–∞. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –∫ –Ω–∏–º!',
    image: '/images/news/site-launch.jpg'
  },
  {
    title: '–î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π –≤ –∫–æ–ª–ª–µ–¥–∂–µ',
    description: '–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤—Å–µ—Ö –∂–µ–ª–∞—é—â–∏—Ö –Ω–∞ –î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π! –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ –Ω–∞—à–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—è—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –æ–±—É—á–µ–Ω–∏—è.',
    image: '/images/news/open-day.jpg'
  },
  {
    title: '–ù–æ–≤—ã–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã',
    description: '–ö–æ–ª–ª–µ–¥–∂ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —Å—Ñ–µ—Ä–µ IT. –£—Å–ø–µ–π—Ç–µ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ!',
    image: '/images/news/new-programs.jpg'
  },
  {
    title: '–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π —Ö–∞–∫–∞—Ç–æ–Ω',
    description: '–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ —Ö–∞–∫–∞—Ç–æ–Ω–µ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ - 100,000 —Ä—É–±–ª–µ–π!',
    image: '/images/news/hackathon.jpg'
  }
])

const events = ref([])
const searchQuery = ref('') // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

const fetchEvents = async () => {
  const res = await $fetch('/api/events')
  if (res.success) {
    events.value = res.events
  }
}
onMounted(() => {
  fetchEvents()
  setInterval(() => {
    currentSlide.value = (currentSlide.value + 1) % newsSlides.value.length
  }, 5000)
})

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
const filteredEvents = computed(() => {
  if (!searchQuery.value) {
    return events.value
  }
  const query = searchQuery.value.toLowerCase()
  return events.value.filter(event => event.title.toLowerCase().includes(query))
})

const goToEvent = (id) => {
  router.push(`/events/${id}`)
}

const formatDate = (date) => {
  if (!date) return ''
  return new Date(date).toLocaleDateString('ru-RU')
}
</script>

<style scoped>
.news-section {
  max-width: 1400px;
  margin: 40px auto;
  padding: 0 32px;
}

.section-title {
  font-size: 24px;
  font-weight: 700;
  color: #5a6a7a;
  margin-bottom: 24px;
}

.news-slider {
  position: relative;
  background: #fff;
  border-radius: 16px;
  border: 2px solid #bfc9d1;
  overflow: hidden;
}

.news-slide {
  display: none;
  aspect-ratio: 16/9;
}

.news-slide.active {
  display: block;
}

.news-block {
  width: 100%;
  height: 100%;
  background: #f7f9fb;
  padding: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.news-content {
  max-width: 800px;
  text-align: center;
}

.news-image {
  width: 100%;
  max-height: 300px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 20px;
}

.news-content h3 {
  font-size: 28px;
  color: #2c3e50;
  margin-bottom: 16px;
}

.news-content p {
  font-size: 18px;
  color: #5a6a7a;
  line-height: 1.6;
}

.news-tabs {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
}

.tab {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #bfc9d1;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}

.tab.active {
  background: #5a6a7a;
}

.benefits-section {
  max-width: 1400px;
  margin: 40px auto;
  padding: 0 32px;
}

.benefits-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
  margin-top: 24px;
}

.benefit-card {
  background: white;
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s, box-shadow 0.2s;
}

.benefit-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.benefit-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.benefit-card h3 {
  color: #2c3e50;
  font-size: 20px;
  margin-bottom: 12px;
}

.benefit-card p {
  color: #5a6a7a;
  font-size: 16px;
  line-height: 1.5;
}

.features-section {
  max-width: 1200px;
  margin: 60px auto;
  padding: 0 32px;
}

.features-list {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.feature-item {
  background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
  border-left: 5px solid var(--main-blue);
  border-radius: 8px;
  padding: 20px;
  display: flex;
  align-items: flex-start;
  gap: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-item:hover {
  transform: translateX(5px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.feature-icon {
  font-size: 36px;
  flex-shrink: 0;
  padding-top: 5px;
}

.feature-content h3 {
  color: var(--main-blue-dark);
  font-size: 22px;
  margin: 0 0 8px 0;
}

.feature-content p {
  color: #444;
  font-size: 15px;
  line-height: 1.5;
  margin: 0;
}

.recommend-section {
  max-width: 1400px;
  margin: 40px auto 60px auto;
  padding: 0 32px;
}

.search-bar {
  margin-bottom: 30px; /* –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø */
  max-width: 600px; /* –£–≤–µ–ª–∏—á–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É */
  margin-left: auto;
  margin-right: auto;
  position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∫–æ–Ω–∫–∏, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è */
}

.search-input {
  width: 100%;
  padding: 12px 40px 12px 15px; /* –î–æ–±–∞–≤–ª—è–µ–º padding —Å–ø—Ä–∞–≤–∞ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–π –∏–∫–æ–Ω–∫–∏ */
  border: 2px solid #e0e0e0; /* –ë–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
  border-radius: 25px; /* –°–∏–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
  font-size: 17px; /* –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ —à—Ä–∏—Ñ—Ç */
  box-sizing: border-box;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  outline: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π outline –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
}

.search-input:focus {
  border-color: var(--main-blue); /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
  box-shadow: 0 0 0 3px rgba(var(--main-blue-rgb), 0.2); /* –¢–µ–Ω—å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
}

.search-input::placeholder {
  color: #a0a0a0; /* –°–≤–µ—Ç–ª–µ–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä */
  opacity: 1; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ opacity –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ Firefox */
}

/* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –ø–æ–∏—Å–∫–∞ */
/*
.search-bar::after {
  content: '\1F50D'; // Unicode —Å–∏–º–≤–æ–ª –ª—É–ø—ã
  position: absolute;
  top: 50%;
  right: 15px;
  transform: translateY(-50%);
  color: #a0a0a0;
  font-size: 20px;
  pointer-events: none; // –ù–µ –º–µ—à–∞–µ—Ç –∫–ª–∏–∫–∞—Ç—å –ø–æ –ø–æ–ª—é
}
*/

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}

.buttons-row {
  display: flex;
  gap: 16px;
  justify-content: center;
}

@media (max-width: 700px) {
  .news-section,
  .recommend-section {
    padding: 0 16px;
  }
  
  .cards-grid {
    grid-template-columns: 1fr;
  }
  
  .buttons-row {
    flex-direction: column;
  }
  
  .news-block {
    padding: 24px;
  }
  
  .news-content h3 {
    font-size: 24px;
  }
  
  .news-content p {
    font-size: 16px;
  }
  
  .benefits-section {
    padding: 0 16px;
  }
  
  .benefits-grid {
    grid-template-columns: 1fr;
  }
  
  .features-section {
    padding: 0 16px;
  }
  
  .feature-item {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  
  .feature-icon {
    padding-top: 0;
    margin-bottom: 10px;
  }
}
</style> 